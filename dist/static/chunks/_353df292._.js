(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([typeof document === "object" ? document.currentScript : undefined, {

"[project]/src/components/ui/background-elements.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>BackgroundElements)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
;
function BackgroundElements() {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "fixed inset-0 overflow-hidden pointer-events-none z-5",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "absolute top-1/4 left-1/4 w-24 h-24 bg-gradient-to-r from-green-100 to-green-50 rounded-full opacity-50 animate-float mix-blend-multiply"
            }, void 0, false, {
                fileName: "[project]/src/components/ui/background-elements.tsx",
                lineNumber: 5,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "absolute top-1/3 right-32 w-48 h-48 bg-green-100 rounded-full opacity-20 animate-blob animation-delay-2000"
            }, void 0, false, {
                fileName: "[project]/src/components/ui/background-elements.tsx",
                lineNumber: 8,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "absolute top-2/3 left-16 w-16 h-16 bg-green-50 rotate-45 opacity-30 animate-float animation-delay-3000"
            }, void 0, false, {
                fileName: "[project]/src/components/ui/background-elements.tsx",
                lineNumber: 11,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "absolute bottom-32 right-1/4",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "w-32 h-32 border-4 border-green-100 rounded-full animate-pulse opacity-30"
                }, void 0, false, {
                    fileName: "[project]/src/components/ui/background-elements.tsx",
                    lineNumber: 15,
                    columnNumber: 17
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/ui/background-elements.tsx",
                lineNumber: 14,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "absolute inset-0 opacity-10",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "h-full w-full bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"
                }, void 0, false, {
                    fileName: "[project]/src/components/ui/background-elements.tsx",
                    lineNumber: 20,
                    columnNumber: 17
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/ui/background-elements.tsx",
                lineNumber: 19,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "absolute top-0 left-0 w-1/3 h-full animate-line",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "w-px h-full bg-gradient-to-b from-transparent via-green-100 to-transparent"
                }, void 0, false, {
                    fileName: "[project]/src/components/ui/background-elements.tsx",
                    lineNumber: 25,
                    columnNumber: 17
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/ui/background-elements.tsx",
                lineNumber: 24,
                columnNumber: 13
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/ui/background-elements.tsx",
        lineNumber: 3,
        columnNumber: 9
    }, this);
}
_c = BackgroundElements;
var _c;
__turbopack_context__.k.register(_c, "BackgroundElements");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/lib/utils.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "cn": (()=>cn)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/clsx/dist/clsx.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tailwind-merge/dist/bundle-mjs.mjs [app-client] (ecmascript)");
;
;
function cn(...inputs) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["twMerge"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["clsx"])(inputs));
}
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/components/ui/input.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "Input": (()=>Input)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.tsx [app-client] (ecmascript)");
;
;
;
const Input = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"])(_c = ({ className, type, ...props }, ref)=>{
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("input", {
        type: type,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])('flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50', className),
        ref: ref,
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/input.tsx",
        lineNumber: 11,
        columnNumber: 7
    }, this);
});
_c1 = Input;
Input.displayName = 'Input';
;
var _c, _c1;
__turbopack_context__.k.register(_c, "Input$React.forwardRef");
__turbopack_context__.k.register(_c1, "Input");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/components/ui/button.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "Button": (()=>Button),
    "buttonVariants": (()=>buttonVariants)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$slot$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@radix-ui/react-slot/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$class$2d$variance$2d$authority$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/class-variance-authority/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.tsx [app-client] (ecmascript)");
;
;
;
;
const buttonVariants = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$class$2d$variance$2d$authority$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cva"])("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive", {
    variants: {
        variant: {
            default: "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
            destructive: "bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
            outline: "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
            secondary: "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
            ghost: "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
            link: "text-primary underline-offset-4 hover:underline"
        },
        size: {
            default: "h-9 px-4 py-2 has-[>svg]:px-3",
            sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
            lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
            icon: "size-9"
        }
    },
    defaultVariants: {
        variant: "default",
        size: "default"
    }
});
function Button({ className, variant, size, asChild = false, ...props }) {
    const Comp = asChild ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$slot$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Slot"] : "button";
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(Comp, {
        "data-slot": "button",
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])(buttonVariants({
            variant,
            size,
            className
        })),
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/button.tsx",
        lineNumber: 51,
        columnNumber: 5
    }, this);
}
_c = Button;
;
var _c;
__turbopack_context__.k.register(_c, "Button");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/interests-selector.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
// components/InterestSelector.tsx
__turbopack_context__.s({
    "default": (()=>InterestSelector)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/input.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__X$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/x.js [app-client] (ecmascript) <export default as X>");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
// --- CHILD COMPONENT ---
const InterestTag = ({ text, onRemove })=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "tag inline-flex items-center bg-green-600 text-white py-1 px-3 rounded-full m-1 font-medium text-sm transition-all duration-200 animate-in fade-in-50",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                children: text
            }, void 0, false, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 28,
                columnNumber: 9
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                onClick: ()=>onRemove(text),
                className: "ml-2 bg-black/10 hover:bg-black/30 rounded-full w-5 h-5 flex items-center justify-center transition-colors",
                "aria-label": `Remove ${text}`,
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$x$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__X$3e$__["X"], {
                    size: 14
                }, void 0, false, {
                    fileName: "[project]/src/components/interests-selector.tsx",
                    lineNumber: 34,
                    columnNumber: 13
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 29,
                columnNumber: 9
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/interests-selector.tsx",
        lineNumber: 27,
        columnNumber: 5
    }, this);
_c = InterestTag;
// --- HELPER COMPONENT ---
const LoadingSpinner = ()=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("svg", {
        className: "animate-spin -ml-1 mr-3 h-5 w-5 text-white",
        xmlns: "http://www.w3.org/2000/svg",
        fill: "none",
        viewBox: "0 0 24 24",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("circle", {
                className: "opacity-25",
                cx: "12",
                cy: "12",
                r: "10",
                stroke: "currentColor",
                strokeWidth: "4"
            }, void 0, false, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 42,
                columnNumber: 9
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                className: "opacity-75",
                fill: "currentColor",
                d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            }, void 0, false, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 43,
                columnNumber: 9
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/interests-selector.tsx",
        lineNumber: 41,
        columnNumber: 5
    }, this);
_c1 = LoadingSpinner;
function InterestSelector({ interests, onInterestsChange, onFindMatch, isConnecting, status }) {
    _s();
    const [currentInput, setCurrentInput] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [popularInterests, setPopularInterests] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [isLoadingTopics, setIsLoadingTopics] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const API_BASE_URL = 'https://animochat-turn-server.onrender.com';
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "InterestSelector.useEffect": ()=>{
            const fetchPopularInterests = {
                "InterestSelector.useEffect.fetchPopularInterests": async ()=>{
                    setIsLoadingTopics(true);
                    try {
                        const response = await fetch(`${API_BASE_URL}/interests/popular`);
                        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                        const data = await response.json();
                        setPopularInterests(data);
                    } catch (e) {
                        console.error('Failed to fetch popular interests:', e);
                        setError('Could not load topics.');
                    } finally{
                        setIsLoadingTopics(false);
                    }
                }
            }["InterestSelector.useEffect.fetchPopularInterests"];
            fetchPopularInterests();
        }
    }["InterestSelector.useEffect"], []);
    const addInterest = (interest)=>{
        const cleanedInterest = interest.trim().toUpperCase();
        if (cleanedInterest && !interests.has(cleanedInterest)) {
            onInterestsChange(new Set(interests).add(cleanedInterest));
        }
        setCurrentInput("");
    };
    const removeInterest = (interestToRemove)=>{
        const newInterests = new Set(interests);
        newInterests.delete(interestToRemove);
        onInterestsChange(newInterests);
    };
    const handleKeyDown = (e)=>{
        if (e.key === 'Enter') {
            e.preventDefault();
            addInterest(currentInput);
        }
    };
    const handleFindMatch = ()=>{
        let finalInterests = new Set(interests);
        if (currentInput.trim() && !finalInterests.has(currentInput.trim().toUpperCase())) {
            finalInterests = new Set(finalInterests).add(currentInput.trim().toUpperCase());
            onInterestsChange(finalInterests); // Update parent state immediately
        }
        onFindMatch(finalInterests);
    };
    const renderPopularInterests = ()=>{
        if (isLoadingTopics) return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
            className: "text-sm text-gray-400",
            children: "Loading topics..."
        }, void 0, false, {
            fileName: "[project]/src/components/interests-selector.tsx",
            lineNumber: 106,
            columnNumber: 33
        }, this);
        if (error) return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
            className: "text-sm text-red-500",
            children: error
        }, void 0, false, {
            fileName: "[project]/src/components/interests-selector.tsx",
            lineNumber: 107,
            columnNumber: 23
        }, this);
        if (popularInterests.length === 0) return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
            className: "text-sm text-gray-400",
            children: "No active topics."
        }, void 0, false, {
            fileName: "[project]/src/components/interests-selector.tsx",
            lineNumber: 108,
            columnNumber: 47
        }, this);
        return popularInterests.map(({ interest, count })=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                onClick: ()=>addInterest(interest),
                className: "bg-green-100 text-green-800 text-xs font-semibold px-3 py-1.5 rounded-full hover:bg-green-200 hover:scale-105 transition-all duration-200",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                        children: interest
                    }, void 0, false, {
                        fileName: "[project]/src/components/interests-selector.tsx",
                        lineNumber: 111,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                        className: "bg-green-200 text-green-900 text-[10px] font-bold px-1.5 py-0.5 rounded-full ml-2",
                        children: count
                    }, void 0, false, {
                        fileName: "[project]/src/components/interests-selector.tsx",
                        lineNumber: 112,
                        columnNumber: 9
                    }, this)
                ]
            }, interest, true, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 110,
                columnNumber: 7
            }, this));
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "w-[350px] max-w-full mx-auto",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex flex-wrap justify-center gap-2 min-h-[36px] mb-4",
                        children: Array.from(interests).map((interest)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(InterestTag, {
                                text: interest,
                                onRemove: removeInterest
                            }, interest, false, {
                                fileName: "[project]/src/components/interests-selector.tsx",
                                lineNumber: 121,
                                columnNumber: 52
                            }, this))
                    }, void 0, false, {
                        fileName: "[project]/src/components/interests-selector.tsx",
                        lineNumber: 120,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Input"], {
                        id: "interest-input",
                        type: "text",
                        value: currentInput,
                        onChange: (e)=>setCurrentInput(e.target.value),
                        onKeyDown: handleKeyDown,
                        className: "rounded-full py-6 px-6 focus-visible:border-green-500 focus-visible:ring-green-500 ring-offset-1 text-center",
                        placeholder: "Type an interest & press Enter",
                        maxLength: 26
                    }, void 0, false, {
                        fileName: "[project]/src/components/interests-selector.tsx",
                        lineNumber: 123,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 119,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "mt-8 text-center",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
                        className: "text-sm font-bold text-gray-500 uppercase tracking-wider mb-4",
                        children: "Popular Topics"
                    }, void 0, false, {
                        fileName: "[project]/src/components/interests-selector.tsx",
                        lineNumber: 127,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex flex-wrap justify-center gap-2 max-w-md mx-auto",
                        children: renderPopularInterests()
                    }, void 0, false, {
                        fileName: "[project]/src/components/interests-selector.tsx",
                        lineNumber: 128,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 126,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "mt-12 w-[350px] max-w-full mx-auto",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                    onClick: handleFindMatch,
                    disabled: isConnecting || interests.size === 0 && !currentInput.trim(),
                    className: "w-full rounded-full py-6 bg-green-600 hover:bg-green-700 text-white font-bold text-base disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",
                    children: isConnecting ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(LoadingSpinner, {}, void 0, false, {
                                fileName: "[project]/src/components/interests-selector.tsx",
                                lineNumber: 135,
                                columnNumber: 15
                            }, this),
                            status
                        ]
                    }, void 0, true) : 'Find Match'
                }, void 0, false, {
                    fileName: "[project]/src/components/interests-selector.tsx",
                    lineNumber: 132,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/interests-selector.tsx",
                lineNumber: 131,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true);
}
_s(InterestSelector, "FVkGb8Ydc6gW/eM59+kU1cHry4I=");
_c2 = InterestSelector;
var _c, _c1, _c2;
__turbopack_context__.k.register(_c, "InterestTag");
__turbopack_context__.k.register(_c1, "LoadingSpinner");
__turbopack_context__.k.register(_c2, "InterestSelector");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/lib/types.ts [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "DEFAULT_THEME": (()=>DEFAULT_THEME)
});
const DEFAULT_THEME = {
    id: "default",
    name: "Default Chat Theme",
    // bg-green-600
    accentColor: "#16a34a",
    userBubbleGradient: "linear-gradient(90deg, #16a34a, #16a34a)",
    userTextColor: "#ffffff",
    otherBubbleGradient: "linear-gradient(90deg, #f3f4f6, #f3f4f6)",
    otherTextColor: "#1F2937",
    otherAnimated: false,
    userAnimated: false,
    chatBackground: "linear-gradient(180deg, #ffffff, #ffffff)"
};
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/lib/color-utils.ts [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "getTextColor": (()=>getTextColor)
});
function getTextColor(bgColor) {
    // if bgColor is linear gradient calculate the average color
    if (bgColor.includes("linear-gradient")) {
        const colors = bgColor.match(/#([0-9A-F]{6}|[0-9A-F]{3})/gi);
        if (colors) {
            const total = colors.reduce((acc, color)=>{
                const c = color.charAt(0) === "#" ? color.substring(1, 7) : color;
                const r = parseInt(c.substring(0, 2), 16);
                const g = parseInt(c.substring(2, 4), 16);
                const b = parseInt(c.substring(4, 6), 16);
                return acc + r * 0.299 + g * 0.587 + b * 0.114;
            }, 0);
            return total / colors.length > 186 ? "#000000" : "#ffffff";
        }
    }
    const color = bgColor.charAt(0) === "#" ? bgColor.substring(1, 7) : bgColor;
    const r = parseInt(color.substring(0, 2), 16);
    const g = parseInt(color.substring(2, 4), 16);
    const b = parseInt(color.substring(4, 6), 16);
    return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? "#000000" : "#ffffff";
}
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/action-icons.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>ActionIcons)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$smile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__SmileIcon$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/smile.js [app-client] (ecmascript) <export default as SmileIcon>");
;
;
function ActionIcons({ visible, isUserMessage, reply, onOpenEmojiMenu, theme, isDeleted = false }) {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: `flex flex-row h-full min-h-full justify-center space-x-1 ${visible ? "visible" : "invisible"}`,
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: `${isUserMessage ? "mr-1 mt-1" : "ml-2 mt-1"} h-[2rem] rounded-full transition-colors p-2 cursor-pointer hover:opacity-100 opacity-80`,
                style: {
                    background: isUserMessage ? theme.userBubbleGradient : theme.otherBubbleGradient,
                    color: !isUserMessage ? theme.otherTextColor : theme.userTextColor
                },
                onClick: reply,
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("svg", {
                    className: `w-4 h-4`,
                    fill: "none",
                    strokeWidth: "2",
                    stroke: "currentColor",
                    viewBox: "0 0 24 24",
                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                        d: "M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/action-icons.tsx",
                        lineNumber: 48,
                        columnNumber: 11
                    }, this)
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/action-icons.tsx",
                    lineNumber: 41,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/chat/action-icons.tsx",
                lineNumber: 29,
                columnNumber: 7
            }, this),
            !isDeleted && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "mt-1 h-[2rem] opacity-80 rounded-full transition-colors p-2 cursor-pointer hover:opacity-100",
                onClick: onOpenEmojiMenu,
                style: {
                    background: isUserMessage ? theme.userBubbleGradient : theme.otherBubbleGradient
                },
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$smile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__SmileIcon$3e$__["SmileIcon"], {
                    className: `w-4 h-4`,
                    style: {
                        color: !isUserMessage ? theme.otherTextColor : theme.userTextColor
                    },
                    fill: "none",
                    strokeWidth: "2",
                    stroke: "currentColor",
                    viewBox: "0 0 24 24"
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/action-icons.tsx",
                    lineNumber: 62,
                    columnNumber: 11
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/chat/action-icons.tsx",
                lineNumber: 53,
                columnNumber: 9
            }, this),
            isUserMessage && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "w-1"
            }, void 0, false, {
                fileName: "[project]/src/components/chat/action-icons.tsx",
                lineNumber: 76,
                columnNumber: 25
            }, this)
        ]
    }, "actions", true, {
        fileName: "[project]/src/components/chat/action-icons.tsx",
        lineNumber: 23,
        columnNumber: 5
    }, this);
}
_c = ActionIcons;
var _c;
__turbopack_context__.k.register(_c, "ActionIcons");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/reply-indicator.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>ReplyIndicator)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/image.js [app-client] (ecmascript)");
;
;
function ReplyIndicator({ message, isUserMessage, theme }) {
    if (!message) return null;
    if (message.type === "image") {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(ReplyIndicatorImage, {
            message: message,
            isUserMessage: isUserMessage,
            theme: theme
        }, void 0, false, {
            fileName: "[project]/src/components/chat/reply-indicator.tsx",
            lineNumber: 20,
            columnNumber: 7
        }, this);
    }
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            className: "rounded-tl-3xl rounded-tr-3xl rounded-b-3xl px-3 pt-2 text-sm opacity-[0.65] pb-[32px] -mb-[32px] -z-20",
            style: {
                background: isUserMessage ? theme.userBubbleGradient : theme.otherBubbleGradient,
                color: isUserMessage ? theme.userTextColor : theme.otherTextColor
            },
            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                className: "break-words whitespace-pre-wrap",
                children: message.type === "deleted" ? "Deleted message." : message.content
            }, void 0, false, {
                fileName: "[project]/src/components/chat/reply-indicator.tsx",
                lineNumber: 38,
                columnNumber: 9
            }, this)
        }, void 0, false, {
            fileName: "[project]/src/components/chat/reply-indicator.tsx",
            lineNumber: 29,
            columnNumber: 7
        }, this)
    }, void 0, false);
}
_c = ReplyIndicator;
function ReplyIndicatorImage({ message, isUserMessage, theme }) {
    // background is image
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "pb-[32px] -mb-[32px] rounded-tl-3xl rounded-tr-3xl rounded-b-3xl",
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
            src: message.content,
            alt: "image",
            className: "rounded-tl-3xl rounded-tr-3xl rounded-b-3xl object-contain mb-1",
            width: 80,
            height: 100
        }, void 0, false, {
            fileName: "[project]/src/components/chat/reply-indicator.tsx",
            lineNumber: 59,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/components/chat/reply-indicator.tsx",
        lineNumber: 58,
        columnNumber: 5
    }, this);
}
_c1 = ReplyIndicatorImage;
var _c, _c1;
__turbopack_context__.k.register(_c, "ReplyIndicator");
__turbopack_context__.k.register(_c1, "ReplyIndicatorImage");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/reaction-bubble.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>ReactionBubble)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs [app-client] (ecmascript)");
;
;
function ReactionBubble({ message, user, theme }) {
    const reactions = message.reactions;
    if (!reactions || reactions.length === 0) return null;
    const reactionCount = reactions.length;
    const reactionEmojis = Array.from(new Set(reactions.map((reaction)=>reaction.emoji)));
    const userReaction = reactions.find((reaction)=>reaction.user_id === user.id);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
        initial: {
            opacity: 0,
            scale: 0
        },
        animate: {
            opacity: 1,
            scale: 1
        },
        exit: {
            opacity: 0,
            scale: 0
        },
        transition: {
            duration: 0.2,
            ease: "easeOut"
        },
        className: "flex justify-end",
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            className: "self-end text-xs text-black relative rounded-full mt-auto bg-gray-200 border-2 border-white p-1.5 -top-2",
            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex justify-center",
                children: [
                    reactionEmojis.map((emoji, index)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "text-center",
                            children: emoji
                        }, index, false, {
                            fileName: "[project]/src/components/chat/reaction-bubble.tsx",
                            lineNumber: 34,
                            columnNumber: 13
                        }, this)),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "pl-1",
                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                            style: {
                                // if user reacted use themeAccentColor
                                color: userReaction ? theme.accentColor : "black"
                            },
                            children: reactionCount
                        }, void 0, false, {
                            fileName: "[project]/src/components/chat/reaction-bubble.tsx",
                            lineNumber: 39,
                            columnNumber: 13
                        }, this)
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/reaction-bubble.tsx",
                        lineNumber: 38,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/chat/reaction-bubble.tsx",
                lineNumber: 32,
                columnNumber: 9
            }, this)
        }, void 0, false, {
            fileName: "[project]/src/components/chat/reaction-bubble.tsx",
            lineNumber: 31,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/components/chat/reaction-bubble.tsx",
        lineNumber: 24,
        columnNumber: 5
    }, this);
}
_c = ReactionBubble;
var _c;
__turbopack_context__.k.register(_c, "ReactionBubble");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/hooks/use-long-press-hack.ts [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "useLongPressHack": (()=>useLongPressHack)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
;
function useLongPressHack(callback, { delay = 500 } = {}) {
    _s();
    const timerRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    // This ref tracks if the user moved during the touch.
    const hasMovedRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(false);
    // Clears the long press timer.
    const clearTimer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLongPressHack.useCallback[clearTimer]": ()=>{
            if (timerRef.current !== null) {
                clearTimeout(timerRef.current);
                timerRef.current = null;
            }
        }
    }["useLongPressHack.useCallback[clearTimer]"], []);
    // Starts the long press timer.
    const onTouchStart = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLongPressHack.useCallback[onTouchStart]": (event)=>{
            hasMovedRef.current = false;
            timerRef.current = window.setTimeout({
                "useLongPressHack.useCallback[onTouchStart]": ()=>{
                    callback(event);
                }
            }["useLongPressHack.useCallback[onTouchStart]"], delay);
        }
    }["useLongPressHack.useCallback[onTouchStart]"], [
        callback,
        delay
    ]);
    // Marks that a move occurred and cancels the timer.
    const onTouchMove = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLongPressHack.useCallback[onTouchMove]": (event)=>{
            hasMovedRef.current = true;
            clearTimer();
        }
    }["useLongPressHack.useCallback[onTouchMove]"], [
        clearTimer
    ]);
    // On touch end, stops propagation if the user hasn't moved, and clears the timer.
    const onTouchEnd = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLongPressHack.useCallback[onTouchEnd]": (event)=>{
            if (!hasMovedRef.current) {
                event.stopPropagation();
            }
            clearTimer();
        }
    }["useLongPressHack.useCallback[onTouchEnd]"], [
        clearTimer
    ]);
    // Clears the timer if the touch is canceled.
    const onTouchCancel = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLongPressHack.useCallback[onTouchCancel]": (event)=>{
            clearTimer();
        }
    }["useLongPressHack.useCallback[onTouchCancel]"], [
        clearTimer
    ]);
    return {
        onTouchStart,
        onTouchMove,
        onTouchEnd,
        onTouchCancel
    };
}
_s(useLongPressHack, "d+iYOvAeuu7MwCHUnP5abQtxATU=");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/message-bubble.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>MessageBubble)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$color$2d$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/color-utils.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$linkify$2d$react$2f$dist$2f$linkify$2d$react$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/linkify-react/dist/linkify-react.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$value$2f$use$2d$motion$2d$value$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/value/use-motion-value.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$value$2f$use$2d$transform$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/value/use-transform.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$action$2d$icons$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/action-icons.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$reply$2d$indicator$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/reply-indicator.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$reaction$2d$bubble$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/reaction-bubble.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$reply$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Reply$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/reply.js [app-client] (ecmascript) <export default as Reply>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$use$2d$long$2d$press$2d$hack$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/hooks/use-long-press-hack.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/image.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$photo$2d$view$2f$dist$2f$react$2d$photo$2d$view$2e$module$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/react-photo-view/dist/react-photo-view.module.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/types.ts [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature(), _s1 = __turbopack_context__.k.signature();
;
;
;
;
;
;
;
;
;
;
;
;
;
function isOnlyEmojis(str) {
    const trimmed = str.trim();
    if (!trimmed) return false;
    // Remove all whitespace
    const noSpaces = trimmed.replace(/\s+/g, "");
    // This regex uses Unicode property escapes to match emoji.
    // (Note: Ensure your environment supports Unicode regex.)
    const emojiRegex = /(\p{Emoji_Presentation}|\p{Emoji}\uFE0F)/gu;
    const matches = noSpaces.match(emojiRegex);
    // If there are matches and their concatenation equals the full string,
    // then the string is composed solely of emojis.
    return matches ? matches.join("") === noSpaces : false;
}
function countEmojis(str) {
    const noSpaces = str.trim().replace(/\s+/g, "");
    const emojiRegex = /(\p{Emoji_Presentation}|\p{Emoji}\uFE0F)/gu;
    const matches = noSpaces.match(emojiRegex);
    return matches ? matches.length : 0;
}
function getRoundedCorners(isUserMessage, hasPrevious, hasNext) {
    if (isUserMessage) {
        return `rounded-tl-3xl rounded-bl-3xl ${hasPrevious ? "rounded-tr-sm" : "rounded-tr-3xl"} ${hasNext ? "rounded-br-sm" : "rounded-br-3xl"}`;
    } else {
        return `rounded-tr-3xl rounded-br-3xl ${hasPrevious ? "rounded-tl-sm" : "rounded-tl-3xl"} ${hasNext ? "rounded-bl-sm" : "rounded-bl-3xl"}`;
    }
}
function MessageBubble({ message, user, hovered, reply, animate = false, onOpenEmojiMenu, onResendMessage, theme = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_THEME"], advertisementMessageId, onLinkClick, onReact }) {
    _s();
    const isUserMessage = message.sender === user.id;
    const roundedCorners = getRoundedCorners(isUserMessage, message.hasPrevious, message.hasNext);
    const sending = message.status === "sending";
    const error = message.status === "error";
    const edited = message.edited ?? false;
    const messageContent = message.content;
    const isLargeEmojiMessage = isOnlyEmojis(messageContent) && countEmojis(messageContent) <= 3;
    const x = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$value$2f$use$2d$motion$2d$value$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMotionValue"])(0);
    const replyIconScale = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$value$2f$use$2d$transform$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTransform"])(x, !isUserMessage ? [
        0,
        30,
        40,
        50
    ] : [
        0,
        -30,
        -40,
        -50
    ], [
        0,
        0.5,
        0.8,
        1
    ]);
    const handlePan = (event, info)=>{
        if (isUserMessage && info.offset.x > 0) return; // Only allow right swipe for "me" messages
        if (!isUserMessage && info.offset.x < 0) return; // Only allow left swipe for "other" messages
        if (document.querySelector("#emoji-overlay-main")) {
            x.set(0);
            if (event instanceof TouchEvent) {
                const touchEvent = new TouchEvent("touchstart", {
                    bubbles: true,
                    cancelable: true,
                    composed: true,
                    touches: [
                        event.touches[0]
                    ]
                });
                document?.dispatchEvent(touchEvent);
            }
            return;
        }
        x.set(info.offset.x);
    };
    const handlePanEnd = (event, info)=>{
        const threshold = 50;
        if (isUserMessage && info.offset.x < -threshold || !isUserMessage && info.offset.x > threshold) {
            if (!document.querySelector("#emoji-overlay-main")) {
                reply();
            }
        }
        x.set(0);
    };
    const longPressHandler = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$use$2d$long$2d$press$2d$hack$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLongPressHack"])({
        "MessageBubble.useLongPressHack[longPressHandler]": (event)=>{
            if (message.type === "deleted") return;
            onOpenEmojiMenu();
            let touchEvent = new TouchEvent("pointerup", {
                bubbles: true,
                cancelable: true,
                composed: true
            });
            event.target.dispatchEvent(touchEvent);
        }
    }["MessageBubble.useLongPressHack[longPressHandler]"]);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: `relative flex w-full items-center ${isUserMessage ? "justify-end" : "justify-start"}`,
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
                className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("absolute p-2.5 rounded-full", isUserMessage ? "right-0" : "left-0"),
                style: {
                    background: `${theme.accentColor}15`,
                    scale: replyIconScale
                },
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$reply$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Reply$3e$__["Reply"], {
                    className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("w-4 h-4"),
                    style: {
                        color: theme.accentColor
                    }
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/message-bubble.tsx",
                    lineNumber: 184,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 174,
                columnNumber: 7
            }, this),
            !error && isUserMessage && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                className: `opacity-50 text-[0.70rem] self-end pr-2 pb-2 overflow-clip -mr-[80px] ${advertisementMessageId === message.id && !hovered ? "visible" : "invisible"}`,
                style: {
                    color: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$color$2d$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getTextColor"])(theme.chatBackground)
                },
                children: "AnimoChat.com"
            }, void 0, false, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 193,
                columnNumber: 9
            }, this),
            isUserMessage && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$action$2d$icons$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                isUserMessage: message.sender === user.id,
                visible: hovered,
                theme: theme,
                reply: reply,
                onOpenEmojiMenu: onOpenEmojiMenu,
                isDeleted: message.type === "deleted"
            }, void 0, false, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 208,
                columnNumber: 9
            }, this),
            error && isUserMessage && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                className: `opacity-50 text-[0.70rem] self-end pr-2 pb-2 overflow-clip text-red-800`,
                children: [
                    "Error sending message.",
                    " ",
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                        className: "underline cursor-pointer",
                        onClick: ()=>onResendMessage(message),
                        children: "Retry"
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 224,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 220,
                columnNumber: 9
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
                id: "message-bubble",
                dragSnapToOrigin: true,
                dragTransition: {
                    bounceDamping: 13
                },
                drag: "x",
                dragConstraints: {
                    left: 0,
                    right: 0
                },
                onDrag: handlePan,
                onDragEnd: handlePanEnd,
                whileTap: {
                    scale: 0.8
                },
                style: {
                    x,
                    originX: isUserMessage ? 1 : 0,
                    WebkitTapHighlightColor: "transparent"
                },
                onDoubleClick: ()=>{
                    onReact("❤️");
                },
                ...message.type !== "deleted" && {
                    onContextMenu: (e)=>{
                        e.preventDefault();
                        e.stopPropagation();
                        onOpenEmojiMenu();
                    }
                },
                ...longPressHandler,
                initial: animate ? {
                    scale: 0,
                    opacity: 0
                } : false,
                animate: {
                    scale: 1,
                    opacity: 1
                },
                transition: {
                    type: "spring",
                    duration: 0.4
                },
                className: `max-w-[75%] mb-0.5 flex flex-col ${isUserMessage ? "items-end" : "items-start"} ${sending ? "opacity-50" : ""}`,
                children: [
                    edited && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "text-[0.70rem] px-2 text-gray-500",
                        children: "Edited"
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 283,
                        columnNumber: 20
                    }, this),
                    message.replyingTo && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$reply$2d$indicator$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                        message: message.replyingTo,
                        isUserMessage: isUserMessage,
                        theme: theme
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 286,
                        columnNumber: 11
                    }, this),
                    (message.type === null || message.type === undefined || message.type === "text" || message.type === "deleted") && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(TextMessage, {
                        isLargeEmojiMessage: isLargeEmojiMessage,
                        message: message,
                        user: user,
                        theme: theme,
                        isUserMessage: isUserMessage,
                        roundedCorners: roundedCorners,
                        onLinkClick: onLinkClick
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 297,
                        columnNumber: 11
                    }, this),
                    message.type === "image" && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(BlurredImageMessage, {
                        user: user,
                        message: message,
                        roundedCorners: roundedCorners,
                        isUserMessage: isUserMessage,
                        theme: theme
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 309,
                        columnNumber: 11
                    }, this)
                ]
            }, message.id + "-bubble", true, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 233,
                columnNumber: 7
            }, this),
            !isUserMessage && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$action$2d$icons$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                visible: hovered,
                theme: theme,
                isUserMessage: false,
                reply: reply,
                onOpenEmojiMenu: onOpenEmojiMenu
            }, void 0, false, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 319,
                columnNumber: 9
            }, this),
            !isUserMessage && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                className: `opacity-50 text-[0.70rem] self-end pl-2 pb-2 -ml-[70px] ${advertisementMessageId === message.id && !hovered ? "visible" : "invisible"}`,
                style: {
                    color: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$color$2d$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getTextColor"])(theme.chatBackground)
                },
                children: "AnimoChat.com"
            }, void 0, false, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 328,
                columnNumber: 9
            }, this)
        ]
    }, message.id, true, {
        fileName: "[project]/src/components/chat/message-bubble.tsx",
        lineNumber: 168,
        columnNumber: 5
    }, this);
}
_s(MessageBubble, "JnOIyMiRy6gxetuJZtVdoRRldV8=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$value$2f$use$2d$motion$2d$value$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMotionValue"],
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$value$2f$use$2d$transform$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTransform"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$use$2d$long$2d$press$2d$hack$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLongPressHack"]
    ];
});
_c = MessageBubble;
function BlurredImageMessage({ user, message, roundedCorners, isUserMessage, theme }) {
    _s1();
    const [clicked, setClicked] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const combinedRounded = `rounded-3xl ${roundedCorners} ${isUserMessage ? "rounded-tr-3xl" : "rounded-tl-3xl"}`;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        id: "image-message-container",
        onClick: ()=>setClicked(true),
        style: {
            cursor: "pointer"
        },
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: combinedRounded,
                style: {
                    overflow: "hidden",
                    position: "relative",
                    // Provide an outline that remains sharp
                    border: "2px solid transparent"
                },
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$photo$2d$view$2f$dist$2f$react$2d$photo$2d$view$2e$module$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PhotoView"], {
                        src: message.content,
                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                            width: ("TURBOPACK compile-time truthy", 1) ? Math.min(window.innerWidth * 0.6, 300) : ("TURBOPACK unreachable", undefined),
                            height: ("TURBOPACK compile-time truthy", 1) ? Math.min(window.innerWidth * 0.6, 300) : ("TURBOPACK unreachable", undefined),
                            className: combinedRounded,
                            src: message.content,
                            alt: "Image",
                            style: {
                                filter: clicked ? "none" : "blur(8px)",
                                transition: "filter 0.3s ease-in-out",
                                maxWidth: "100%",
                                objectFit: "contain",
                                backgroundColor: theme.chatBackground
                            },
                            sizes: "(max-width: 768px) 70vw, 400px"
                        }, void 0, false, {
                            fileName: "[project]/src/components/chat/message-bubble.tsx",
                            lineNumber: 380,
                            columnNumber: 11
                        }, this)
                    }, message.id, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 379,
                        columnNumber: 9
                    }, this),
                    !clicked && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        style: {
                            position: "absolute",
                            top: "50%",
                            left: "50%",
                            transform: "translate(-50%, -50%)",
                            color: theme.userTextColor,
                            backgroundColor: "rgba(0, 0, 0, 0.4)",
                            padding: "4px 8px",
                            borderRadius: "0.25rem",
                            pointerEvents: "none",
                            fontSize: "0.85rem"
                        },
                        children: "(tap to reveal)"
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 405,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 370,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$reaction$2d$bubble$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                message: message,
                user: user,
                theme: theme
            }, void 0, false, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 423,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/chat/message-bubble.tsx",
        lineNumber: 364,
        columnNumber: 5
    }, this);
}
_s1(BlurredImageMessage, "NL05b5J4z4O/U6wEzhVGl+YEdv8=");
_c1 = BlurredImageMessage;
function TextMessage({ message, user, theme, isUserMessage, roundedCorners, isLargeEmojiMessage, onLinkClick }) {
    const isDeleted = message.type === "deleted";
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: isLargeEmojiMessage ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "px-2 py-2",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "text-5xl",
                        children: message.content
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 452,
                        columnNumber: 13
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "mt-4",
                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$reaction$2d$bubble$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                            message: message,
                            user: user,
                            theme: theme
                        }, void 0, false, {
                            fileName: "[project]/src/components/chat/message-bubble.tsx",
                            lineNumber: 454,
                            columnNumber: 15
                        }, this)
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                        lineNumber: 453,
                        columnNumber: 13
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/chat/message-bubble.tsx",
                lineNumber: 451,
                columnNumber: 11
            }, this)
        }, void 0, false) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            className: "flex flex-col",
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "relative group",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: `${roundedCorners} animate-gradient-x`,
                            style: {
                                background: isUserMessage ? theme.userBubbleGradient : theme.otherBubbleGradient,
                                backgroundSize: "200% 100%",
                                color: isUserMessage ? theme.userTextColor : theme.otherTextColor
                            }
                        }, void 0, false, {
                            fileName: "[project]/src/components/chat/message-bubble.tsx",
                            lineNumber: 461,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: `${roundedCorners} relative max-w-full break-words px-3 py-2 ${!isUserMessage && theme.otherAnimated || isUserMessage && theme.userAnimated ? "bg-white opacity-70" : ""}`,
                            style: {
                                wordBreak: "break-word",
                                overflowWrap: "break-word",
                                color: isUserMessage ? theme.userTextColor : theme.otherTextColor
                            },
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                className: "break-words whitespace-pre-wrap",
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$linkify$2d$react$2f$dist$2f$linkify$2d$react$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                                    options: {
                                        attributes: {
                                            target: "_blank",
                                            rel: "noopener noreferrer",
                                            className: "underline"
                                        },
                                        render: ({ attributes, content })=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("a", {
                                                ...attributes,
                                                onClick: (e)=>{
                                                    if (onLinkClick) {
                                                        onLinkClick(e);
                                                    } else {
                                                        e.stopPropagation();
                                                    }
                                                },
                                                children: content
                                            }, void 0, false, {
                                                fileName: "[project]/src/components/chat/message-bubble.tsx",
                                                lineNumber: 497,
                                                columnNumber: 23
                                            }, void 0)
                                    },
                                    children: isDeleted ? // italicize the deleted message (Message has been deleted.)
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                        className: "italic",
                                        children: "Message has been deleted."
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/chat/message-bubble.tsx",
                                        lineNumber: 514,
                                        columnNumber: 21
                                    }, this) : message.content
                                }, void 0, false, {
                                    fileName: "[project]/src/components/chat/message-bubble.tsx",
                                    lineNumber: 489,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/components/chat/message-bubble.tsx",
                                lineNumber: 488,
                                columnNumber: 15
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/src/components/chat/message-bubble.tsx",
                            lineNumber: 473,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/src/components/chat/message-bubble.tsx",
                    lineNumber: 460,
                    columnNumber: 11
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$reaction$2d$bubble$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                    message: message,
                    user: user,
                    theme: theme
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/message-bubble.tsx",
                    lineNumber: 522,
                    columnNumber: 11
                }, this)
            ]
        }, void 0, true, {
            fileName: "[project]/src/components/chat/message-bubble.tsx",
            lineNumber: 459,
            columnNumber: 9
        }, this)
    }, void 0, false);
}
_c2 = TextMessage;
var _c, _c1, _c2;
__turbopack_context__.k.register(_c, "MessageBubble");
__turbopack_context__.k.register(_c1, "BlurredImageMessage");
__turbopack_context__.k.register(_c2, "TextMessage");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/swipeable-message.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "SWIPE_THRESHOLD": (()=>SWIPE_THRESHOLD),
    "SwipeableMessage": (()=>SwipeableMessage),
    "TAP_THRESHOLD": (()=>TAP_THRESHOLD)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$message$2d$bubble$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/message-bubble.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/types.ts [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
;
;
;
;
;
const SWIPE_THRESHOLD = 50;
const TAP_THRESHOLD = 5;
function SwipeableMessage({ message, user, onSwipe, onReact, onStartedSwipe, onEndedSwipe, animate = false, theme = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_THEME"], advertisementMessageId, onOpenEmojiMenu = ()=>{}, onResendMessage = ()=>{}, isEmojiMenuOpen, onLinkClick }) {
    _s();
    const [hovered, setHovered] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [isTouchDevice, setIsTouchDevice] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "SwipeableMessage.useEffect": ()=>{
            const isTouch = "ontouchstart" in window || navigator.maxTouchPoints > 0;
            setIsTouchDevice(isTouch);
        }
    }["SwipeableMessage.useEffect"], []);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        "data-message-id": "message-" + message.id,
        className: "relative px-4 select-none",
        onMouseEnter: ()=>!isTouchDevice && setHovered(true),
        onMouseLeave: ()=>!isTouchDevice && setHovered(false),
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$message$2d$bubble$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                onLinkClick: onLinkClick,
                animate: animate,
                message: message,
                user: user,
                hovered: hovered,
                reply: ()=>onSwipe(message.id),
                onOpenEmojiMenu: ()=>onOpenEmojiMenu(message),
                onReact: (emoji)=>onReact(message.id, emoji),
                onResendMessage: onResendMessage,
                theme: theme,
                advertisementMessageId: advertisementMessageId
            }, message.id + "-bubble", false, {
                fileName: "[project]/src/components/chat/swipeable-message.tsx",
                lineNumber: 74,
                columnNumber: 9
            }, this)
        }, "parent-message-bubble flex flex-col", false, {
            fileName: "[project]/src/components/chat/swipeable-message.tsx",
            lineNumber: 71,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/components/chat/swipeable-message.tsx",
        lineNumber: 65,
        columnNumber: 5
    }, this);
}
_s(SwipeableMessage, "qkwX2s7qDZpnFdr90k0znDLeBMw=");
_c = SwipeableMessage;
/* Helper Functions */ function toggleChatContainerScroll(enable) {
    const chatContainer = document.getElementById("chat-container");
    if (chatContainer) {
        if (enable) chatContainer.classList.remove("overflow-y-hidden");
        else chatContainer.classList.add("overflow-y-hidden");
    }
}
// Allow scolling only when needed
const toggleBodyScroll = (disable)=>{
    if (disable) {
        document.body.style.overflow = "hidden"; // Disable scrolling
    } else {
        document.body.style.overflow = ""; // Re-enable scrolling
    }
};
function getSelectedEmoji() {
    const emojiContainer = document.getElementById("emoji-container");
    if (!emojiContainer) return undefined;
    const emojis = emojiContainer.getElementsByClassName("emoji");
    for(let i = 0; i < emojis.length; i++){
        if (emojis[i].classList.contains("selected")) {
            return emojis[i].textContent || undefined;
        }
    }
    return undefined;
}
var _c;
__turbopack_context__.k.register(_c, "SwipeableMessage");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/chat-message-item.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>ChatMessageItem)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$format$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/date-fns/format.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$swipeable$2d$message$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/swipeable-message.tsx [app-client] (ecmascript)");
;
;
;
function ChatMessageItem({ index, message, user, animate = false, isLast = false, onSwipe, onStartedSwipe, onEndedSwipe, onReact, onOpenEmojiMenu, onResendMessage, isEmojiMenuOpen, theme, secondVisibleElement, onLinkClick }) {
    if (message.sender === "system") {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            className: "flex justify-center py-4 px-4 text-center",
            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                className: "text-xs text-gray-500",
                children: message.content
            }, void 0, false, {
                fileName: "[project]/src/components/chat/chat-message-item.tsx",
                lineNumber: 49,
                columnNumber: 9
            }, this)
        }, message.id + "_system", false, {
            fileName: "[project]/src/components/chat/chat-message-item.tsx",
            lineNumber: 45,
            columnNumber: 7
        }, this);
    }
    const isAdvertisement = index % 5 === 0;
    const advertisementMessageId = isAdvertisement ? message.id : null;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        "data-is-message": "true",
        "data-message-id": message.id,
        className: "max-w-full w-full select-none",
        children: [
            message.showTime && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex justify-center py-4",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                    className: "text-xs text-gray-500 font-normal",
                    children: message.created_at && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$format$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["format"])(new Date(message.created_at), "h:mm a")
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/chat-message-item.tsx",
                    lineNumber: 66,
                    columnNumber: 11
                }, this)
            }, message.id + "_time", false, {
                fileName: "[project]/src/components/chat/chat-message-item.tsx",
                lineNumber: 65,
                columnNumber: 9
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$swipeable$2d$message$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SwipeableMessage"], {
                advertisementMessageId: advertisementMessageId,
                message: message,
                animate: animate,
                user: user,
                onSwipe: onSwipe,
                onStartedSwipe: onStartedSwipe,
                onEndedSwipe: onEndedSwipe,
                onReact: onReact,
                onOpenEmojiMenu: onOpenEmojiMenu,
                onResendMessage: onResendMessage,
                theme: theme,
                isEmojiMenuOpen: isEmojiMenuOpen,
                onLinkClick: onLinkClick
            }, message.id + "_message", false, {
                fileName: "[project]/src/components/chat/chat-message-item.tsx",
                lineNumber: 73,
                columnNumber: 7
            }, this),
            (isLast || !message.hasNext) && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "h-1"
            }, message.id + "_bottom", false, {
                fileName: "[project]/src/components/chat/chat-message-item.tsx",
                lineNumber: 91,
                columnNumber: 9
            }, this)
        ]
    }, "parent_message_" + message.id, true, {
        fileName: "[project]/src/components/chat/chat-message-item.tsx",
        lineNumber: 58,
        columnNumber: 5
    }, this);
}
_c = ChatMessageItem;
var _c;
__turbopack_context__.k.register(_c, "ChatMessageItem");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/hooks/use-actual-messages.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "useActualMessages": (()=>useActualMessages)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
;
// Define the time threshold (e.g., 5 minutes) in milliseconds
const TIME_THRESHOLD_MS = 5 * 60 * 1000;
function useActualMessages(messages) {
    _s();
    const [actualMessages, setActualMessages] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useActualMessages.useEffect": ()=>{
            if (!messages || messages.length === 0) {
                setActualMessages([]);
                return;
            }
            let lastShownTimestamp = null;
            let processedMessages = []; // Use a more specific type if available that includes the new properties
            // --- Pass 1: Calculate initial properties including the corrected showTime ---
            for(let i = 0; i < messages.length; i++){
                const message = messages[i];
                const currentTimestamp = new Date(message.created_at).getTime();
                let showTime = false;
                // Check if it's a valid timestamp before proceeding
                if (!isNaN(currentTimestamp)) {
                    // Determine if time should be shown for this message
                    // Show time if it's the first message considered OR enough time has passed since the last shown time.
                    // Crucially, only *non-system/typing/filler* messages should potentially trigger a timestamp display.
                    if (message.sender !== "system" && message.id !== "typing" && message.id !== "filler") {
                        if (lastShownTimestamp === null || currentTimestamp - lastShownTimestamp > TIME_THRESHOLD_MS) {
                            showTime = true;
                            lastShownTimestamp = currentTimestamp; // Update the last shown time *only* when we decide to show it
                        }
                    }
                } else {
                    console.warn("Invalid date encountered for message:", message.id); // Log invalid dates
                }
                processedMessages.push({
                    ...message,
                    // Assign calculated showTime. Keep original created_at!
                    showTime: showTime,
                    // Initialize grouping properties - will be refined in the next pass
                    hasPrevious: false,
                    hasNext: false
                });
            }
            // --- Pass 2: Refine grouping (hasPrevious/hasNext) based on sender, showTime, reactions, replies ---
            // We need a loop here (not map) to easily modify properties of adjacent elements (like previous.hasNext)
            for(let i = 0; i < processedMessages.length; i++){
                const current = processedMessages[i];
                const previous = processedMessages[i - 1];
                const next = processedMessages[i + 1];
                // 1. Initial grouping based on sender continuity
                current.hasPrevious = !!previous && previous.sender === current.sender;
                current.hasNext = !!next && next.sender === current.sender;
                // --- Adjust grouping based on various break conditions ---
                // 2. Time Break: If current message shows time, it breaks the chain from the previous message.
                if (current.showTime && previous) {
                    current.hasPrevious = false;
                    previous.hasNext = false; // Modify the actual previous message object
                }
                // 3. Reaction Break: If current has reactions, it shouldn't visually connect to the next.
                if (current.reactions && current.reactions.length > 0 && next) {
                    current.hasNext = false;
                    // Also ensure the next message doesn't think it has a preceding message from the same sender in this group
                    if (next.sender === current.sender) {
                        next.hasPrevious = false;
                    }
                }
                // 4. Reply Break (Previous): If current is a reply, break connection with the previous message.
                if (current.replyingTo && previous) {
                    current.hasPrevious = false;
                    if (previous.sender === current.sender) {
                        previous.hasNext = false;
                    }
                }
                // 5. Reply Break (Next): If current is a reply, break connection with the next message.
                if (current.replyingTo && next) {
                    current.hasNext = false;
                    if (next.sender === current.sender) {
                        next.hasPrevious = false;
                    }
                }
                // if the previous message is reply, it should not be connected to the current message
                if (previous && previous.replyingTo) {
                    current.hasPrevious = false;
                    previous.hasNext = false; // Modify the actual previous message object
                }
                // 6. System/Typing Break: If the *next* message is system or typing, the current message shouldn't link forward.
                // (This prevents chaining a user message visually into a system message).
                let effectiveNext = processedMessages[i + 1];
                if (effectiveNext && (effectiveNext.sender === "system" || effectiveNext.id === "typing" || effectiveNext.id === "filler")) {
                    current.hasNext = false;
                // We don't necessarily need to set effectiveNext.hasPrevious = false here,
                // as system/typing messages might have different styling anyway.
                }
            }
            // --- Pass 3: Final adjustments - Move "typing", remove duplicates ---
            // Find and remove the "typing" message temporarily
            let typingMessage = null; // Use the extended type if available
            const typingMessageIndex = processedMessages.findIndex({
                "useActualMessages.useEffect.typingMessageIndex": (message)=>message.id === "typing"
            }["useActualMessages.useEffect.typingMessageIndex"]);
            if (typingMessageIndex !== -1) {
                typingMessage = processedMessages.splice(typingMessageIndex, 1)[0];
            }
            // Remove duplicate messages based on ID, keeping the first occurrence
            const uniqueIds = new Set();
            const uniqueMessages = processedMessages.filter({
                "useActualMessages.useEffect.uniqueMessages": (message)=>{
                    if (uniqueIds.has(message.id)) {
                        return false; // Skip duplicates
                    }
                    uniqueIds.add(message.id);
                    return true; // Keep unique messages
                }
            }["useActualMessages.useEffect.uniqueMessages"]);
            // Add the "typing" message back to the end if it existed
            if (typingMessage) {
                uniqueMessages.push(typingMessage);
            }
            // Update the state with the fully processed messages
            setActualMessages(uniqueMessages);
        }
    }["useActualMessages.useEffect"], [
        messages
    ]); // Re-run effect only when the input 'messages' array changes
    return actualMessages;
}
_s(useActualMessages, "RLfKytR7RYBRsRttewWdUIl7ORw=");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/emoji-menu.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "REACTION_EMOJIS": (()=>REACTION_EMOJIS),
    "default": (()=>EmojiMenu)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$components$2f$AnimatePresence$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
const REACTION_EMOJIS = [
    "❤️",
    "😆",
    "😮",
    "😢",
    "😭",
    "😡",
    "👍"
];
function EmojiMenu({ isUserMessage, preselectedEmoji, message, messageDiv, onReact, onClose }) {
    _s();
    // Ref for the emoji container so we can measure its dimensions if needed
    const emojiContainerRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    // State to hold the computed position
    const [position, setPosition] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])({
        top: 0,
        left: 0
    });
    const [hoveredEmoji, setHoveredEmoji] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    // Use layout effect to measure before paint
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLayoutEffect"])({
        "EmojiMenu.useLayoutEffect": ()=>{
            // get div with id "message-bubble"
            const messageBubble = messageDiv.querySelector("#message-bubble");
            messageBubble.style.position = "relative";
            messageBubble.style.zIndex = "30";
            if (messageBubble && emojiContainerRef.current) {
                const bubbleRect = messageBubble.getBoundingClientRect();
                const container = emojiContainerRef.current;
                // Optionally measure container dimensions
                const containerHeight = container.offsetHeight;
                // position at the top and left of the message bubble
                // accounting for scroll position
                let top = bubbleRect.top;
                // add window scroll
                top += window.scrollY;
                // currently, the top is set to the top of the message bubble
                // so it will be right above the message bubble
                // adjust it to be at the top of the message bubble
                top -= containerHeight + 10;
                // top = Math.max(top, -containerHeight * 4);
                // centered horizontally on the window
                let left = bubbleRect.right - container.offsetWidth - 16;
                const isUserMessage = messageBubble.classList.contains("items-end");
                if (!isUserMessage) {
                    // if the message is from the user, then move the emoji container to the left
                    // so it is right next to the message bubble
                    left = bubbleRect.left - 16;
                }
                setPosition({
                    top,
                    left
                });
            }
            return ({
                "EmojiMenu.useLayoutEffect": ()=>{
                    // messageBubble.style.position = "static";
                    messageBubble.style.zIndex = "0";
                }
            })["EmojiMenu.useLayoutEffect"];
        }
    }["EmojiMenu.useLayoutEffect"], [
        messageDiv
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "EmojiMenu.useEffect": ()=>{
            // Global listener to “capture” pointer moves after the long press
            const handlePointerMove = {
                "EmojiMenu.useEffect.handlePointerMove": (event)=>{
                    // Check if our emoji container is mounted
                    if (!emojiContainerRef.current) return;
                    // Find the element at the pointer coordinates
                    const targetElem = document.elementFromPoint(event.clientX, event.clientY);
                    if (targetElem) {
                        // Look for an emoji element (make sure each emoji element has a data attribute, e.g., data-emoji)
                        const emojiElem = targetElem.closest("[data-emoji]");
                        if (emojiElem) {
                            const emoji = emojiElem.getAttribute("data-emoji");
                            setHoveredEmoji(emoji);
                            return;
                        }
                    }
                    setHoveredEmoji(null);
                }
            }["EmojiMenu.useEffect.handlePointerMove"];
            const handlePointerUp = {
                "EmojiMenu.useEffect.handlePointerUp": (event)=>{
                    console.log("Pointer up event:", event);
                    if (hoveredEmoji) {
                        onReact(message.id, preselectedEmoji?.emoji === hoveredEmoji ? null : hoveredEmoji);
                        onClose();
                    }
                }
            }["EmojiMenu.useEffect.handlePointerUp"];
            // Listen at the window level so that even if the pointer isn’t directly over our container
            window.addEventListener("pointermove", handlePointerMove);
            window.addEventListener("pointerup", handlePointerUp);
            return ({
                "EmojiMenu.useEffect": ()=>{
                    window.removeEventListener("pointermove", handlePointerMove);
                    window.removeEventListener("pointerup", handlePointerUp);
                }
            })["EmojiMenu.useEffect"];
        }
    }["EmojiMenu.useEffect"], [
        hoveredEmoji,
        onReact,
        onClose,
        preselectedEmoji,
        message.id
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "EmojiMenu.useEffect": ()=>{
            if (emojiContainerRef.current) {
                // Dispatch a synthetic pointerdown event to “capture” events on this element.
                const pointerDownEvent = new PointerEvent("pointerdown", {
                    bubbles: true,
                    cancelable: true
                });
                emojiContainerRef.current.dispatchEvent(pointerDownEvent);
            // You could also call containerRef.current.setPointerCapture(event.pointerId)
            // if you had access to the pointerId (but that typically comes during an actual pointerdown).
            }
        }
    }["EmojiMenu.useEffect"], []);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
        layout: true,
        className: "absolute top-0 left-0 w-screen h-screen",
        initial: {
            userSelect: "none",
            zIndex: 100,
            opacity: 0,
            height: 0
        },
        animate: {
            opacity: 1,
            height: "auto"
        },
        exit: {
            opacity: 0,
            height: 0
        },
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            id: "emoji-abs-container",
            className: `absolute border-box flex z-50 w-full md:w-fit px-4`,
            style: {
                position: "absolute",
                top: position.top,
                left: position.left
            },
            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
                ref: emojiContainerRef,
                id: "emoji-container-wrapper",
                className: "w-full backdrop-blur-md bg-gray-100 py-2 px-5 dark:bg-gray-800/80 shadow-lg rounded-full border border-gray-200 dark:border-gray-700",
                initial: {
                    scale: 0.8,
                    opacity: 0,
                    y: 10
                },
                animate: {
                    scale: 1,
                    opacity: 1,
                    y: 0,
                    transition: {
                        type: "spring",
                        stiffness: 300,
                        damping: 20
                    }
                },
                exit: {
                    scale: 0.8,
                    opacity: 0,
                    y: 10,
                    transition: {
                        duration: 0.15
                    }
                },
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    id: "emoji-container",
                    className: "flex justify-between",
                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$components$2f$AnimatePresence$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AnimatePresence"], {
                        children: REACTION_EMOJIS.map((emoji)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
                                className: `relative z-10 cursor-pointer rounded-full p-2 ${preselectedEmoji?.emoji === emoji ? "bg-gray-200/80 dark:bg-gray-700/80" : hoveredEmoji === emoji ? "bg-gray-100/80 dark:bg-gray-600/80" : ""}`,
                                //   onClick={() => {
                                //     onReact(
                                //       message.id,
                                //       preselectedEmoji?.emoji === emoji ? null : emoji
                                //     );
                                //     onClose();
                                //   }}
                                "data-emoji": emoji,
                                animate: {
                                    scale: hoveredEmoji === emoji ? 1.6 : 1
                                },
                                transition: {
                                    type: "spring",
                                    stiffness: 300,
                                    damping: 20
                                },
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                        className: "text-xl",
                                        children: emoji
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/chat/emoji-menu.tsx",
                                        lineNumber: 220,
                                        columnNumber: 19
                                    }, this),
                                    preselectedEmoji?.emoji === emoji && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
                                        className: "absolute -bottom-0.5 left-1/2 w-1 h-1 bg-green-500 rounded-full",
                                        initial: {
                                            opacity: 0
                                        },
                                        animate: {
                                            opacity: 1
                                        },
                                        layoutId: "selectedDot",
                                        style: {
                                            translateX: "-50%"
                                        }
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/chat/emoji-menu.tsx",
                                        lineNumber: 224,
                                        columnNumber: 21
                                    }, this)
                                ]
                            }, emoji, true, {
                                fileName: "[project]/src/components/chat/emoji-menu.tsx",
                                lineNumber: 200,
                                columnNumber: 17
                            }, this))
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat/emoji-menu.tsx",
                        lineNumber: 198,
                        columnNumber: 13
                    }, this)
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/emoji-menu.tsx",
                    lineNumber: 197,
                    columnNumber: 11
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/chat/emoji-menu.tsx",
                lineNumber: 169,
                columnNumber: 9
            }, this)
        }, void 0, false, {
            fileName: "[project]/src/components/chat/emoji-menu.tsx",
            lineNumber: 160,
            columnNumber: 7
        }, this)
    }, "emoji-menu", false, {
        fileName: "[project]/src/components/chat/emoji-menu.tsx",
        lineNumber: 141,
        columnNumber: 5
    }, this);
}
_s(EmojiMenu, "wLAhSYbMpb/ct9S5wPfU6scPFDA=");
_c = EmojiMenu;
var _c;
__turbopack_context__.k.register(_c, "EmojiMenu");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/context-menu.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>ContextMenu)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$copy$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Copy$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/copy.js [app-client] (ecmascript) <export default as Copy>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$square$2d$pen$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Edit$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/square-pen.js [app-client] (ecmascript) <export default as Edit>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$reply$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Reply$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/reply.js [app-client] (ecmascript) <export default as Reply>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$trash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Trash$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/trash.js [app-client] (ecmascript) <export default as Trash>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
;
;
;
function ContextMenu({ theme, anchor, onReply, onCopy, onEdit, onClose, onDelete }) {
    _s();
    const messageBuble = anchor.querySelector("#message-bubble");
    const isUserMessage = messageBuble.classList.contains("items-end");
    // if the message bubble contains a div with the id "image-message-container", then it is an image message
    const isImageMessage = messageBuble.querySelector("#image-message-container") !== null;
    const items = [
        {
            icon: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$reply$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Reply$3e$__["Reply"], {
                className: "h-4 w-4"
            }, void 0, false, {
                fileName: "[project]/src/components/chat/context-menu.tsx",
                lineNumber: 35,
                columnNumber: 13
            }, this),
            text: "Reply",
            onClick: onReply
        },
        {
            icon: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$copy$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Copy$3e$__["Copy"], {
                className: "h-4 w-4"
            }, void 0, false, {
                fileName: "[project]/src/components/chat/context-menu.tsx",
                lineNumber: 36,
                columnNumber: 13
            }, this),
            text: "Copy",
            onClick: onCopy
        },
        ...isUserMessage && !isImageMessage ? [
            {
                icon: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$square$2d$pen$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Edit$3e$__["Edit"], {
                    className: "h-4 w-4"
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/context-menu.tsx",
                    lineNumber: 38,
                    columnNumber: 18
                }, this),
                text: "Edit",
                onClick: onEdit
            }
        ] : [],
        // delete message is isUserMessage
        ...isUserMessage ? [
            {
                icon: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$trash$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Trash$3e$__["Trash"], {
                    className: "h-4 w-4"
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/context-menu.tsx",
                    lineNumber: 43,
                    columnNumber: 18
                }, this),
                text: "Delete",
                onClick: onDelete
            }
        ] : []
    ];
    const [position, setPosition] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])({
        top: 0,
        left: 0
    });
    const [activeIndex, setActiveIndex] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const activeIndexRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const contextMenuRef = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createRef"])();
    // Update the ref so we can always get the latest activeIndex in our pointerup handler
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "ContextMenu.useEffect": ()=>{
            activeIndexRef.current = activeIndex;
        }
    }["ContextMenu.useEffect"], [
        activeIndex
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLayoutEffect"])({
        "ContextMenu.useLayoutEffect": ()=>{
            if (!anchor || !contextMenuRef.current) return;
            const messageBuble = anchor.querySelector("#message-bubble");
            const chatContainer = document.querySelector("#chat-container");
            const rect = messageBuble.getBoundingClientRect();
            const contextRect = contextMenuRef.current.getBoundingClientRect();
            let top = rect.bottom + 10;
            // If the context menu overflows the chat container, position it above the message bubble
            if (top + contextRect.height > chatContainer.clientHeight / 2) {
                top = rect.top - contextRect.height - 10;
                // Adjust emoji container if necessary
                const emojiContainer = document.querySelector("#emoji-abs-container");
                if (emojiContainer) {
                    emojiContainer.style.top = `${top - contextRect.height}px`;
                    top -= emojiContainer.offsetHeight + 24;
                }
            }
            top += window.scrollY;
            let left = rect.right - contextRect.width - 24;
            if (!isUserMessage) {
                left = rect.left;
            }
            setPosition({
                top,
                left
            });
        }
    }["ContextMenu.useLayoutEffect"], [
        anchor,
        isUserMessage
    ]);
    // Global pointer move and pointer up listeners
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "ContextMenu.useEffect": ()=>{
            const handlePointerMove = {
                "ContextMenu.useEffect.handlePointerMove": (e)=>{
                    if (!contextMenuRef.current) return;
                    const buttons = contextMenuRef.current.querySelectorAll("button");
                    let foundIndex = null;
                    buttons.forEach({
                        "ContextMenu.useEffect.handlePointerMove": (button, index)=>{
                            const rect = button.getBoundingClientRect();
                            if (e.clientX >= rect.left && e.clientX <= rect.right && e.clientY >= rect.top && e.clientY <= rect.bottom) {
                                foundIndex = index;
                            }
                        }
                    }["ContextMenu.useEffect.handlePointerMove"]);
                    setActiveIndex(foundIndex);
                }
            }["ContextMenu.useEffect.handlePointerMove"];
            const handlePointerUp = {
                "ContextMenu.useEffect.handlePointerUp": (_e)=>{
                    if (activeIndexRef.current !== null && contextMenuRef.current) {
                        const buttons = contextMenuRef.current.querySelectorAll("button");
                        const button = buttons[activeIndexRef.current];
                        if (button) {
                            // Trigger the click event on the highlighted item
                            button.click();
                        }
                    }
                }
            }["ContextMenu.useEffect.handlePointerUp"];
            window.addEventListener("pointermove", handlePointerMove);
            window.addEventListener("pointerup", handlePointerUp);
            // Dispatch pointerdown event on mount to capture events
            const pointerDownEvent = new PointerEvent("pointerdown", {
                bubbles: true
            });
            window.dispatchEvent(pointerDownEvent);
            return ({
                "ContextMenu.useEffect": ()=>{
                    window.removeEventListener("pointermove", handlePointerMove);
                    window.removeEventListener("pointerup", handlePointerUp);
                }
            })["ContextMenu.useEffect"];
        }
    }["ContextMenu.useEffect"], []);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
        ref: contextMenuRef,
        id: "context-menu",
        className: "absolute flex flex-col rounded-3xl w-[200px] overflow-clip",
        style: {
            background: theme?.chatBackground || "linear-gradient(180deg, #ffffff, #ffffff)",
            top: position.top,
            left: position.left
        },
        initial: {
            opacity: 0,
            scale: 0.9,
            transition: {
                type: "spring",
                stiffness: 300,
                damping: 20
            }
        },
        animate: {
            opacity: 1,
            scale: 1
        },
        exit: {
            opacity: 0,
            scale: 0.9,
            transition: {
                duration: 0.15
            }
        },
        children: items.map((item, index)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(ContextItem, {
                icon: item.icon,
                text: item.text,
                onClick: ()=>{
                    item.onClick();
                    onClose();
                },
                active: activeIndex === index
            }, index, false, {
                fileName: "[project]/src/components/chat/context-menu.tsx",
                lineNumber: 163,
                columnNumber: 9
            }, this))
    }, void 0, false, {
        fileName: "[project]/src/components/chat/context-menu.tsx",
        lineNumber: 134,
        columnNumber: 5
    }, this);
}
_s(ContextMenu, "jlkGdRzx8HbcoIV7t+vdDlLUkAw=");
_c = ContextMenu;
function ContextItem({ icon, text, onClick, active }) {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
            onClick: onClick,
            className: `flex items-center justify-start w-full px-6 py-4 text-sm text-black hover:bg-gray-200 ${active ? "bg-gray-200" : ""}`,
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                    className: "mr-auto",
                    children: text
                }, void 0, false, {
                    fileName: "[project]/src/components/chat/context-menu.tsx",
                    lineNumber: 194,
                    columnNumber: 9
                }, this),
                icon
            ]
        }, void 0, true, {
            fileName: "[project]/src/components/chat/context-menu.tsx",
            lineNumber: 188,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/components/chat/context-menu.tsx",
        lineNumber: 187,
        columnNumber: 5
    }, this);
}
_c1 = ContextItem;
var _c, _c1;
__turbopack_context__.k.register(_c, "ContextMenu");
__turbopack_context__.k.register(_c1, "ContextItem");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat/emoji-overlay.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "EmojiOverlay": (()=>EmojiOverlay)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$components$2f$AnimatePresence$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$emoji$2d$menu$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/emoji-menu.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$context$2d$menu$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/context-menu.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/types.ts [app-client] (ecmascript)");
;
;
;
;
;
const EmojiOverlay = ({ open, message, messageDiv, user, onReact, onClose, onCopy, onEdit, onReply, onDelete })=>{
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$components$2f$AnimatePresence$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AnimatePresence"], {
        children: open && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            id: "emoji-overlay-main",
            className: "overflow-visible absolute left-0 top-0 select-none",
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["motion"].div, {
                    layout: true,
                    initial: {
                        opacity: 0
                    },
                    animate: {
                        opacity: 0.5
                    },
                    exit: {
                        opacity: 0
                    },
                    className: "fixed inset-0 bg-black z-30",
                    onClick: onClose
                }, "emoji-overlay", false, {
                    fileName: "[project]/src/components/chat/emoji-overlay.tsx",
                    lineNumber: 39,
                    columnNumber: 21
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "relative z-40 w-full",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$emoji$2d$menu$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                            isUserMessage: message.sender === user.id,
                            preselectedEmoji: message.reactions?.find((r)=>r.user_id === user.id),
                            messageDiv: messageDiv,
                            message: message,
                            onReact: onReact,
                            onClose: onClose
                        }, "emoji-menu", false, {
                            fileName: "[project]/src/components/chat/emoji-overlay.tsx",
                            lineNumber: 49,
                            columnNumber: 25
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$context$2d$menu$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                            onCopy: ()=>onCopy(message.id),
                            onEdit: ()=>onEdit(message.id),
                            onReply: ()=>onReply(message.id),
                            onDelete: ()=>onDelete(message.id),
                            onClose: onClose,
                            theme: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_THEME"],
                            anchor: messageDiv
                        }, "context-menu", false, {
                            fileName: "[project]/src/components/chat/emoji-overlay.tsx",
                            lineNumber: 61,
                            columnNumber: 25
                        }, this)
                    ]
                }, "context-container", true, {
                    fileName: "[project]/src/components/chat/emoji-overlay.tsx",
                    lineNumber: 48,
                    columnNumber: 21
                }, this)
            ]
        }, "emoji-overlay-main", true, {
            fileName: "[project]/src/components/chat/emoji-overlay.tsx",
            lineNumber: 34,
            columnNumber: 17
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/components/chat/emoji-overlay.tsx",
        lineNumber: 32,
        columnNumber: 9
    }, this);
};
_c = EmojiOverlay;
var _c;
__turbopack_context__.k.register(_c, "EmojiOverlay");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/chat.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
// components/Chat.tsx
__turbopack_context__.s({
    "default": (()=>Chat)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/input.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/types.ts [app-client] (ecmascript)"); // Make sure this path is correct
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$chat$2d$message$2d$item$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/chat-message-item.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$use$2d$actual$2d$messages$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/hooks/use-actual-messages.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$emoji$2d$overlay$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat/emoji-overlay.tsx [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
;
function Chat({ messages, sendMessage, endChat, onReact, peerId, status }) {
    _s();
    const user = {
        id: peerId
    };
    const [currentMessage, setCurrentMessage] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const chatLogRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const isEmojiMenuOpen = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(false);
    const [emojiMenuState, setEmojiMenuState] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])({
        open: false
    });
    const emojiMenuOpenRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(false);
    const actualMessages = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$use$2d$actual$2d$messages$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useActualMessages"])(messages);
    const onOpenEmojiMenu = (message)=>{
        if (!message) {
            setEmojiMenuState({
                open: false
            });
            emojiMenuOpenRef.current = false;
            return;
        }
        const messageElement = document.querySelector(`[data-message-id="${message?.id}"]`);
        if (messageElement) {
            emojiMenuOpenRef.current = true;
            setEmojiMenuState({
                open: true,
                message,
                messageDiv: messageElement
            });
        }
    };
    // Auto-scroll to the latest message
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "Chat.useEffect": ()=>{
            if (chatLogRef.current) {
                chatLogRef.current.scrollTop = chatLogRef.current.scrollHeight;
            }
        }
    }["Chat.useEffect"], [
        messages
    ]);
    const handleSend = (e)=>{
        e.preventDefault();
        const trimmedMessage = currentMessage.trim();
        if (trimmedMessage) {
            sendMessage(trimmedMessage);
            setCurrentMessage("");
        }
    };
    const renderMessage = (msg, index)=>{
        const isSystem = msg.sender === "System";
        if (isSystem) {
            return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "text-center my-2",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                    className: "text-xs text-gray-500 bg-gray-100 rounded-full px-3 py-1",
                    children: msg.content
                }, void 0, false, {
                    fileName: "[project]/src/components/chat.tsx",
                    lineNumber: 92,
                    columnNumber: 11
                }, this)
            }, index, false, {
                fileName: "[project]/src/components/chat.tsx",
                lineNumber: 91,
                columnNumber: 9
            }, this);
        }
        const user = {
            id: peerId
        };
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$chat$2d$message$2d$item$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
            index: index,
            message: msg,
            user: user,
            isLast: index === messages.length - 1,
            onSwipe: ()=>{},
            onStartedSwipe: ()=>{},
            onEndedSwipe: ()=>{},
            onReact: onReact,
            onOpenEmojiMenu: ()=>onOpenEmojiMenu(msg),
            onResendMessage: ()=>{},
            isEmojiMenuOpen: isEmojiMenuOpen,
            theme: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$types$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_THEME"],
            animate: true,
            secondVisibleElement: null
        }, index, false, {
            fileName: "[project]/src/components/chat.tsx",
            lineNumber: 104,
            columnNumber: 7
        }, this);
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2f$emoji$2d$overlay$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["EmojiOverlay"], {
                open: emojiMenuState.open,
                message: emojiMenuState.message,
                messageDiv: emojiMenuState.messageDiv,
                user: user,
                onReact: onReact,
                onReply: ()=>{},
                onEdit: ()=>{},
                onCopy: ()=>{},
                onDelete: ()=>{},
                onClose: ()=>onOpenEmojiMenu(null)
            }, void 0, false, {
                fileName: "[project]/src/components/chat.tsx",
                lineNumber: 126,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                id: "chat-container",
                className: "w-full max-w-md mx-auto h-screen flex flex-col bg-white/70 backdrop-blur-xl sm:rounded-[2rem] shadow-2xl overflow-hidden",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "p-4 bg-white/60 border-b border-gray-200/80 flex justify-between items-center shrink-0",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "text-left",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-xs font-medium text-gray-500",
                                        children: "Status"
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/chat.tsx",
                                        lineNumber: 147,
                                        columnNumber: 13
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-sm font-semibold text-green-600",
                                        children: status
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/chat.tsx",
                                        lineNumber: 148,
                                        columnNumber: 13
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/components/chat.tsx",
                                lineNumber: 146,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                onClick: endChat,
                                variant: "destructive",
                                size: "sm",
                                className: "rounded-full",
                                children: "End Chat"
                            }, void 0, false, {
                                fileName: "[project]/src/components/chat.tsx",
                                lineNumber: 150,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/components/chat.tsx",
                        lineNumber: 145,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "p-2 text-center text-xs text-gray-500 bg-white/60 border-b border-gray-200/80 shrink-0",
                        children: "not all features are implemented, still in early stages -@tyronscott_"
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat.tsx",
                        lineNumber: 160,
                        columnNumber: 11
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        ref: chatLogRef,
                        className: "flex-grow overflow-y-auto p-4",
                        children: actualMessages.map(renderMessage)
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat.tsx",
                        lineNumber: 165,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "p-4 bg-white/60 border-t border-gray-200/80 shrink-0",
                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("form", {
                            onSubmit: handleSend,
                            className: "flex space-x-3",
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Input"], {
                                    type: "text",
                                    value: currentMessage,
                                    onChange: (e)=>setCurrentMessage(e.target.value),
                                    placeholder: "Type a message...",
                                    className: "flex-grow p-3 border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500 bg-white/80",
                                    autoComplete: "off",
                                    required: true
                                }, void 0, false, {
                                    fileName: "[project]/src/components/chat.tsx",
                                    lineNumber: 172,
                                    columnNumber: 13
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                    type: "submit",
                                    className: "bg-green-500 text-white font-bold w-12 h-12 rounded-full hover:bg-green-600 flex items-center justify-center shadow-lg",
                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("svg", {
                                        xmlns: "http://www.w3.org/2000/svg",
                                        width: "24",
                                        height: "24",
                                        viewBox: "0 0 24 24",
                                        fill: "none",
                                        stroke: "currentColor",
                                        strokeWidth: "2",
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("line", {
                                                x1: "12",
                                                y1: "19",
                                                x2: "12",
                                                y2: "5"
                                            }, void 0, false, {
                                                fileName: "[project]/src/components/chat.tsx",
                                                lineNumber: 196,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("polyline", {
                                                points: "5 12 12 5 19 12"
                                            }, void 0, false, {
                                                fileName: "[project]/src/components/chat.tsx",
                                                lineNumber: 197,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/components/chat.tsx",
                                        lineNumber: 185,
                                        columnNumber: 15
                                    }, this)
                                }, void 0, false, {
                                    fileName: "[project]/src/components/chat.tsx",
                                    lineNumber: 181,
                                    columnNumber: 13
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/src/components/chat.tsx",
                            lineNumber: 171,
                            columnNumber: 11
                        }, this)
                    }, void 0, false, {
                        fileName: "[project]/src/components/chat.tsx",
                        lineNumber: 170,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/chat.tsx",
                lineNumber: 140,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true);
}
_s(Chat, "pWm+oeb1jGdkvV3HT5d9mvPHYDI=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$use$2d$actual$2d$messages$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useActualMessages"]
    ];
});
_c = Chat;
var _c;
__turbopack_context__.k.register(_c, "Chat");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/hooks/useAnimochat.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "useAnimoChat": (()=>useAnimoChat)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2d$browser$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__ = __turbopack_context__.i("[project]/node_modules/uuid/dist/esm-browser/v4.js [app-client] (ecmascript) <export default as v4>");
var _s = __turbopack_context__.k.signature();
;
;
const API_BASE_URL = "https://animochat-turn-server.onrender.com";
const useAnimoChat = ()=>{
    _s();
    const [screen, setScreen] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("intro");
    const [peerId, setPeerId] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [conn, setConn] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [status, setStatus] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("Initializing...");
    const [isConnecting, setIsConnecting] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [messages, setMessages] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [isPeerOutdated, setIsPeerOutdated] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false); // New state for backward compatibility
    const peerRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const matchmakingSource = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const resetState = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useAnimoChat.useCallback[resetState]": (statusMessage = "Ready to connect")=>{
            if (conn) conn.close();
            if (matchmakingSource.current) matchmakingSource.current.close();
            setConn(null);
            setMessages([]);
            setScreen("matchmaking");
            setStatus(statusMessage);
            setIsConnecting(false);
        }
    }["useAnimoChat.useCallback[resetState]"], [
        conn
    ]);
    const handleReaction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useAnimoChat.useCallback[handleReaction]": (messageId, emoji, userId)=>{
            setMessages({
                "useAnimoChat.useCallback[handleReaction]": (prevMessages)=>prevMessages.map({
                        "useAnimoChat.useCallback[handleReaction]": (msg)=>{
                            if (msg.id !== messageId || msg.type === 'system') return msg;
                            const reactions = msg.reactions || [];
                            const existingReactionIndex = reactions.findIndex({
                                "useAnimoChat.useCallback[handleReaction].existingReactionIndex": (r)=>r.user_id === userId
                            }["useAnimoChat.useCallback[handleReaction].existingReactionIndex"]);
                            let newReactions;
                            if (existingReactionIndex > -1) {
                                if (emoji) {
                                    newReactions = [
                                        ...reactions
                                    ];
                                    newReactions[existingReactionIndex] = {
                                        user_id: userId,
                                        emoji
                                    };
                                } else {
                                    newReactions = reactions.filter({
                                        "useAnimoChat.useCallback[handleReaction]": (_, index)=>index !== existingReactionIndex
                                    }["useAnimoChat.useCallback[handleReaction]"]);
                                }
                            } else if (emoji) {
                                newReactions = [
                                    ...reactions,
                                    {
                                        user_id: userId,
                                        emoji
                                    }
                                ];
                            } else {
                                newReactions = reactions;
                            }
                            return {
                                ...msg,
                                reactions: newReactions
                            };
                        }
                    }["useAnimoChat.useCallback[handleReaction]"])
            }["useAnimoChat.useCallback[handleReaction]"]);
        }
    }["useAnimoChat.useCallback[handleReaction]"], []);
    const onReact = async (messageId, emoji)=>{
        if (isPeerOutdated) {
            console.log("Reactions are disabled for outdated clients.");
            return; // Do not send reactions to old clients
        }
        handleReaction(messageId, emoji || null, peerId);
        if (conn && conn.open) {
            const packet = {
                type: "reaction",
                payload: {
                    messageId,
                    emoji: emoji || null,
                    userId: peerId
                }
            };
            conn.send(packet);
        }
    };
    const sendMessage = (text)=>{
        if (conn && conn.open && text) {
            const message = {
                id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2d$browser$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
                content: text,
                sender: peerId,
                session_id: "1",
                created_at: new Date().toISOString(),
                reactions: [],
                type: 'user'
            };
            if (isPeerOutdated) {
                // Old protocol: send the raw string content.
                conn.send(message.content);
            } else {
                // New protocol: send the structured packet.
                const packet = {
                    type: "message",
                    payload: message
                };
                conn.send(packet);
            }
            setMessages((prev)=>[
                    ...prev,
                    message
                ]);
        }
    };
    const endChat = ()=>{
        const systemMessage = {
            id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2d$browser$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
            content: "You have ended the chat.",
            type: "system",
            sender: "system",
            created_at: new Date().toISOString(),
            session_id: "1"
        };
        setMessages((prev)=>[
                ...prev,
                systemMessage
            ]);
        resetState("Chat ended. Find a new match.");
    };
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useAnimoChat.useEffect": ()=>{
            if (conn) {
                setIsPeerOutdated(false); // Reset flag on new connection
                const matchedOn = conn.metadata?.interest || "an unknown topic";
                setMessages([
                    {
                        id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2d$browser$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
                        content: `Connected with a stranger on: ${matchedOn}`,
                        type: "system",
                        sender: "system",
                        created_at: new Date().toISOString(),
                        session_id: "1"
                    }
                ]);
                conn.on("data", {
                    "useAnimoChat.useEffect": (data)=>{
                        // OLD PROTOCOL DETECTION: Old clients send raw strings.
                        if (typeof data === 'string') {
                            setIsPeerOutdated(true);
                            // Add the outdated user's message to our chat.
                            const incomingMessage = {
                                id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2d$browser$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
                                content: data,
                                sender: conn.peer,
                                type: 'user',
                                reactions: [],
                                session_id: "1",
                                created_at: new Date().toISOString()
                            };
                            setMessages({
                                "useAnimoChat.useEffect": (prev)=>[
                                        ...prev,
                                        incomingMessage
                                    ]
                            }["useAnimoChat.useEffect"]);
                            // Add a persistent warning for our user.
                            const warningId = 'outdated-client-warning';
                            setMessages({
                                "useAnimoChat.useEffect": (prev)=>prev.find({
                                        "useAnimoChat.useEffect": (m)=>m.id === warningId
                                    }["useAnimoChat.useEffect"]) ? prev : [
                                        ...prev,
                                        {
                                            id: warningId,
                                            content: "Your chat partner is using an outdated version. Reactions and other features are disabled.",
                                            type: 'system',
                                            sender: 'system',
                                            created_at: new Date().toISOString(),
                                            session_id: "1"
                                        }
                                    ]
                            }["useAnimoChat.useEffect"]);
                            // Send a raw string message back to the old client telling them to update.
                            conn.send("Your chat partner is using a new version of AnimoChat. Please refresh the page to get the latest features!");
                            return;
                        }
                        // NEW PROTOCOL HANDLING
                        let packet;
                        try {
                            packet = typeof data === 'object' && data !== null ? data : JSON.parse(data);
                        } catch (error) {
                            console.error("Failed to parse incoming data:", data);
                            return;
                        }
                        if (packet.type === "message") {
                            const message = packet.payload;
                            setMessages({
                                "useAnimoChat.useEffect": (prev)=>[
                                        ...prev,
                                        message
                                    ]
                            }["useAnimoChat.useEffect"]);
                        } else if (packet.type === "reaction") {
                            const { messageId, emoji, userId } = packet.payload;
                            handleReaction(messageId, emoji, userId);
                        }
                    }
                }["useAnimoChat.useEffect"]);
                conn.on("close", {
                    "useAnimoChat.useEffect": ()=>{
                        const systemMessage = {
                            id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2d$browser$2f$v4$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])(),
                            content: "Stranger has disconnected.",
                            type: "system",
                            sender: "system",
                            created_at: new Date().toISOString(),
                            session_id: "1"
                        };
                        setMessages({
                            "useAnimoChat.useEffect": (prev)=>[
                                    ...prev,
                                    systemMessage
                                ]
                        }["useAnimoChat.useEffect"]);
                        resetState("Stranger disconnected. Find a new match.");
                    }
                }["useAnimoChat.useEffect"]);
            }
        }
    }["useAnimoChat.useEffect"], [
        conn,
        resetState,
        handleReaction
    ]);
    const initializePeer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useAnimoChat.useCallback[initializePeer]": ()=>{
            if ("object" !== "undefined" && !peerRef.current) {
                __turbopack_context__.r("[project]/node_modules/peerjs/dist/bundler.mjs [app-client] (ecmascript, async loader)")(__turbopack_context__.i).then({
                    "useAnimoChat.useCallback[initializePeer]": ({ default: Peer })=>{
                        const newPeer = new Peer();
                        peerRef.current = newPeer;
                        newPeer.on("open", {
                            "useAnimoChat.useCallback[initializePeer]": (id)=>{
                                setPeerId(id);
                                setStatus("Ready to connect");
                                setIsConnecting(false);
                            }
                        }["useAnimoChat.useCallback[initializePeer]"]);
                        newPeer.on("connection", {
                            "useAnimoChat.useCallback[initializePeer]": (newConn)=>{
                                setConn(newConn);
                                setScreen("chat");
                                setIsConnecting(false);
                            }
                        }["useAnimoChat.useCallback[initializePeer]"]);
                        newPeer.on("error", {
                            "useAnimoChat.useCallback[initializePeer]": (err)=>{
                                console.error("PeerJS error:", err);
                                resetState(`Error: ${err.type}`);
                            }
                        }["useAnimoChat.useCallback[initializePeer]"]);
                    }
                }["useAnimoChat.useCallback[initializePeer]"]).catch({
                    "useAnimoChat.useCallback[initializePeer]": (err)=>console.error("Failed to load PeerJS", err)
                }["useAnimoChat.useCallback[initializePeer]"]);
            }
        }
    }["useAnimoChat.useCallback[initializePeer]"], [
        resetState
    ]);
    const handleGetStarted = ()=>{
        setIsConnecting(true);
        setScreen("matchmaking");
        if (!peerRef.current) {
            initializePeer();
        }
    };
    const startMatchmaking = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useAnimoChat.useCallback[startMatchmaking]": (interests)=>{
            if (!peerId || interests.length === 0 || !peerRef.current) return;
            setStatus("Finding a match...");
            setIsConnecting(true);
            const interestsParam = interests.join(",");
            const url = `${API_BASE_URL}/matchmaking?userId=${peerId}&interest=${interestsParam}`;
            const eventSource = new EventSource(url);
            matchmakingSource.current = eventSource;
            eventSource.onopen = ({
                "useAnimoChat.useCallback[startMatchmaking]": ()=>setStatus("Waiting for a match...")
            })["useAnimoChat.useCallback[startMatchmaking]"];
            eventSource.onmessage = ({
                "useAnimoChat.useCallback[startMatchmaking]": (event)=>{
                    try {
                        const data = JSON.parse(event.data);
                        if (data.state === "MATCHED" && peerRef.current) {
                            setStatus("Match found! Connecting...");
                            const newConn = peerRef.current.connect(data.matchedUserId, {
                                metadata: {
                                    interest: data.interest
                                }
                            });
                            setConn(newConn);
                            setScreen("chat");
                            setIsConnecting(false);
                            eventSource.close();
                        }
                    } catch (e) {
                        console.error("Failed to parse matchmaking data:", e);
                    }
                }
            })["useAnimoChat.useCallback[startMatchmaking]"];
            eventSource.onerror = ({
                "useAnimoChat.useCallback[startMatchmaking]": ()=>{
                    console.error("Matchmaking EventSource error.");
                    resetState("Connection error. Please try again.");
                }
            })["useAnimoChat.useCallback[startMatchmaking]"];
        }
    }["useAnimoChat.useCallback[startMatchmaking]"], [
        peerId,
        resetState
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useAnimoChat.useEffect": ()=>{
            return ({
                "useAnimoChat.useEffect": ()=>{
                    if (peerRef.current) peerRef.current.destroy();
                    if (matchmakingSource.current) matchmakingSource.current.close();
                }
            })["useAnimoChat.useEffect"];
        }
    }["useAnimoChat.useEffect"], []);
    return {
        screen,
        peerId,
        status,
        isConnecting,
        conn,
        messages,
        isPeerOutdated,
        handleGetStarted,
        startMatchmaking,
        endChat,
        sendMessage,
        onReact
    };
};
_s(useAnimoChat, "SCeTO4HUC0rDiO1V4rft9E8u904=");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/app/page.tsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
// App.tsx
__turbopack_context__.s({
    "default": (()=>App)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$background$2d$elements$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/background-elements.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$interests$2d$selector$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/interests-selector.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/chat.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useAnimochat$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/hooks/useAnimochat.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/button.tsx [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
function App() {
    _s();
    const { screen, peerId, status, isConnecting, messages, handleGetStarted, startMatchmaking, endChat, sendMessage, onReact, isPeerOutdated } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useAnimochat$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useAnimoChat"])();
    const [interests, setInterests] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(new Set());
    const handleFindMatch = (interestsToMatch)=>{
        if (interestsToMatch.size === 0) return;
        startMatchmaking(Array.from(interestsToMatch));
    };
    const renderScreen = ()=>{
        switch(screen){
            case "chat":
                return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "h-full w-full flex items-center justify-center sm:p-4",
                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$chat$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                        onReact: onReact,
                        messages: messages,
                        sendMessage: sendMessage,
                        endChat: endChat,
                        peerId: peerId,
                        status: status
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.tsx",
                        lineNumber: 39,
                        columnNumber: 15
                    }, this)
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 38,
                    columnNumber: 12
                }, this);
            case "matchmaking":
                return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "max-w-3xl mx-auto relative w-full",
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "text-center mb-12",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                        className: "text-4xl md:text-6xl font-bold bg-gradient-to-r from-green-600 to-green-400 bg-clip-text text-transparent",
                                        children: "Choose Your Interests"
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.tsx",
                                        lineNumber: 55,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-gray-600 text-lg my-8",
                                        children: "Find someone to chat with based on what you like."
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.tsx",
                                        lineNumber: 58,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/app/page.tsx",
                                lineNumber: 54,
                                columnNumber: 15
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/src/app/page.tsx",
                            lineNumber: 53,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$interests$2d$selector$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                            interests: interests,
                            onInterestsChange: setInterests,
                            onFindMatch: handleFindMatch,
                            isConnecting: isConnecting,
                            status: status
                        }, void 0, false, {
                            fileName: "[project]/src/app/page.tsx",
                            lineNumber: 63,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true);
            case "intro":
            default:
                return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "max-w-3xl mx-auto relative w-full",
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "text-center mb-12",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                        className: "text-4xl md:text-6xl font-bold bg-gradient-to-r from-green-600 to-green-400 bg-clip-text text-transparent",
                                        children: [
                                            "Real-time",
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("br", {}, void 0, false, {
                                                fileName: "[project]/src/app/page.tsx",
                                                lineNumber: 81,
                                                columnNumber: 19
                                            }, this),
                                            "Anonymous Chat"
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/src/app/page.tsx",
                                        lineNumber: 79,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-gray-600 text-lg my-8",
                                        children: "Connect with students anonymously and securely."
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.tsx",
                                        lineNumber: 84,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/app/page.tsx",
                                lineNumber: 78,
                                columnNumber: 15
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/src/app/page.tsx",
                            lineNumber: 77,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "max-w-md mx-auto text-sm space-y-6 text-center",
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("details", {
                                    className: "text-gray-500 bg-gray-50/80 p-3 rounded-2xl border border-gray-200",
                                    children: [
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("summary", {
                                            className: "cursor-pointer font-medium hover:text-green-600",
                                            children: "What is Peer-to-Peer (P2P) Chat?"
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/page.tsx",
                                            lineNumber: 93,
                                            columnNumber: 21
                                        }, this),
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                            className: "mt-2 text-left",
                                            children: 'Peer-to-Peer chat means your messages go directly to the other user without passing through a central server. This provides better privacy and can be faster. Our server only helps to "introduce" two users to each other.'
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/page.tsx",
                                            lineNumber: 94,
                                            columnNumber: 21
                                        }, this)
                                    ]
                                }, void 0, true, {
                                    fileName: "[project]/src/app/page.tsx",
                                    lineNumber: 92,
                                    columnNumber: 17
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    className: "text-red-700 bg-red-50 p-4 rounded-2xl border border-red-200 font-medium",
                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        children: "This is a test version of AnimoChat. Not all features are implemented, and you may encounter bugs."
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.tsx",
                                        lineNumber: 100,
                                        columnNumber: 21
                                    }, this)
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.tsx",
                                    lineNumber: 99,
                                    columnNumber: 17
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/src/app/page.tsx",
                            lineNumber: 91,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "text-center mt-12",
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                onClick: handleGetStarted,
                                disabled: isConnecting,
                                size: "lg",
                                className: "rounded-full py-7 px-8 bg-green-500 hover:bg-green-600 text-white font-bold text-lg",
                                children: isConnecting ? "Initializing..." : "Get Started"
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.tsx",
                                lineNumber: 105,
                                columnNumber: 15
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/src/app/page.tsx",
                            lineNumber: 104,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true);
        }
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "h-full overflow-y-auto overflow-x-hidden",
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("main", {
            className: `container h-full mx-auto flex flex-col ${screen === 'chat' ? 'p-0' : 'px-4 py-8 md:py-16'}`,
            children: [
                screen !== 'chat' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$background$2d$elements$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {}, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 124,
                    columnNumber: 35
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "flex-grow flex flex-col justify-center items-center",
                    children: renderScreen()
                }, void 0, false, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 126,
                    columnNumber: 13
                }, this),
                screen !== 'chat' && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("footer", {
                    className: "text-xs text-gray-500 text-center py-4 shrink-0",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
                            className: "py-4",
                            children: [
                                "Created by developers from",
                                " ",
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                    className: "text-green-700 font-semibold",
                                    children: "De La Salle Lipa"
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.tsx",
                                    lineNumber: 135,
                                    columnNumber: 25
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/src/app/page.tsx",
                            lineNumber: 133,
                            columnNumber: 21
                        }, this),
                        peerId && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                            className: "font-mono text-gray-400 text-[10px] mt-2",
                            children: [
                                "Your Peer ID: ",
                                peerId
                            ]
                        }, void 0, true, {
                            fileName: "[project]/src/app/page.tsx",
                            lineNumber: 140,
                            columnNumber: 25
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/src/app/page.tsx",
                    lineNumber: 132,
                    columnNumber: 17
                }, this)
            ]
        }, void 0, true, {
            fileName: "[project]/src/app/page.tsx",
            lineNumber: 122,
            columnNumber: 9
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/app/page.tsx",
        lineNumber: 120,
        columnNumber: 5
    }, this);
}
_s(App, "ZgiuVFigQmHAwGjyRf3tG4Bvik8=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useAnimochat$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useAnimoChat"]
    ];
});
_c = App;
var _c;
__turbopack_context__.k.register(_c, "App");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
}]);

//# sourceMappingURL=_353df292._.js.map